import qrcode

# Oyun tahtası
board = [" " for _ in range(9)]

# Tahtayı çiz
def print_board():
    print()
    for i in range(3):
        print(" | ".join(board[i*3:(i+1)*3]))
        if i < 2:
            print("---------")
    print()

# Kazananı kontrol et
def check_winner(player):
    win_conditions = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],  # satırlar
        [0, 3, 6], [1, 4, 7], [2, 5, 8],  # sütunlar
        [0, 4, 8], [2, 4, 6]              # çaprazlar
    ]
    for cond in win_conditions:
        if all(board[i] == player for i in cond):
            return True
    return False

# QR kod oluştur
def generate_qr(winner_text):
    img = qrcode.make(winner_text)
    img.save("winner_qr.png")
    print(f"QR Code saved: winner_qr.png → Text: '{winner_text}'")

# Oyun döngüsü
def play_game():
    current_player = "X"
    for turn in range(9):
        print_board()
        move = input(f"Player {current_player}, choose a position (1-9): ")
        
        if not move.isdigit() or int(move) < 1 or int(move) > 9:
            print("Invalid move. Try again.")
            continue

        idx = int(move) - 1
        if board[idx] != " ":
            print("That spot is already taken.")
            continue

        board[idx] = current_player

        if check_winner(current_player):
            print_board()
            print(f"🎉 Player {current_player} wins!")
            generate_qr(f"Winner: Player {current_player}")
            return

        current_player = "O" if current_player == "X" else "X"

    print_board()
    print("It's a tie!")
    generate_qr("It's a tie!")

if __name__ == "__main__":
    play_game()
